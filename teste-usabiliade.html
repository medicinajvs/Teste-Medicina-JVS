<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questionário de Teste de Usabilidade</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        // Configuração do Tailwind (usa o mesmo tema Dark Mode do app)
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark-bg': '#121212',
                        'card-bg': '#1E1E1E',
                        'border-color': '#2D2D2D',
                        'primary': '#D98E73', // Cor de destaque
                        'text-light': '#E0E0E0',
                        'text-muted': '#A0A0A0',
                        'success': '#10B981', // green-500
                        'error': '#EF4444', // red-500
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .section-header {
            border-left: 4px solid #D98E73;
        }
        /* Estilo para Radio Buttons de status */
        .status-radio input[type="radio"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            display: inline-block;
            width: 1rem;
            height: 1rem;
            border-radius: 50%;
            border: 2px solid #555;
            cursor: pointer;
            transition: all 0.2s;
            margin-right: 0.25rem;
            position: relative;
            top: 2px;
        }
        /* Estilo para Status OK */
        .status-radio input[value="OK"]:checked {
            background-color: #10B981;
            border-color: #10B981;
        }
        /* Estilo para Status Erro */
        .status-radio input[value="Erro"]:checked {
            background-color: #EF4444;
            border-color: #EF4444;
        }
        /* Esconder o campo de Problemas/Sugestões se OK */
        .hidden-on-ok {
            display: none;
        }
    </style>
</head>
<body class="bg-dark-bg text-text-light min-h-screen p-4 sm:p-8">

    <div class="max-w-4xl mx-auto">
        <header class="mb-8 pb-4 border-b border-border-color">
            <h1 class="text-3xl font-bold text-white">Questionário de Teste de Usabilidade</h1>
            <p class="text-text-muted mt-2">Dashboard de Flashcards 2.0</p>
        </header>

        <form id="testeForm" class="space-y-12" onsubmit="collectData(event)">

            <section class="space-y-6">
                <h2 class="text-xl font-semibold section-header pl-3 py-1">Seção 1: Configuração Inicial e Navegação</h2>
                <p class="text-sm text-text-muted italic">Instrução: Comece na tela principal (Dashboard) no modo **Treino Livre**.</p>
                
                <!-- Tarefa 1.1 -->
                <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="1.1">
                    <p class="font-medium">1.1. Abra o menu lateral (botão "Menu") e verifique se todos os links estão visíveis e funcionais.</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_1.1" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_1.1" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_1.1" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>

                <!-- Tarefa 1.2 -->
                <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="1.2">
                    <p class="font-medium">1.2. Use a Barra de Busca no cabeçalho para procurar por um assunto ("Trauma") e clique em um resultado de filtro.</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_1.2" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_1.2" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_1.2" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>
                
                <!-- Tarefa 1.3 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="1.3">
                    <p class="font-medium">1.3. Abra o modal de "Modo de aprendizado" e selecione "Revisão Espaçada". Verifique se o dashboard muda corretamente.</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_1.3" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_1.3" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_1.3" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>

                <!-- Tarefa 1.4 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="1.4">
                    <p class="font-medium">1.4. Verifique se as seções de Métricas (Métricas, Gráficos, Evolução) estão **zeradas** ou refletem apenas a pequena atividade de teste anterior do modo Revisão Espaçada.</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_1.4" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_1.4" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_1.4" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>

                <!-- Tarefa 1.5 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="1.5">
                    <p class="font-medium">1.5. Volte para o modo **Treino Livre** e confirme se todas as métricas e o calendário refletem os dados de treino (não estão zerados).</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_1.5" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_1.5" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_1.5" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>
            </section>
            
            <section class="space-y-6">
                <h2 class="text-xl font-semibold section-header pl-3 py-1">Seção 2: Teste do Modo Treino Livre e Filtros</h2>
                <p class="text-sm text-text-muted italic">Instrução: Permaneça no modo **Treino Livre** e explore os filtros.</p>

                 <!-- Tarefa 2.1 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="2.1">
                    <p class="font-medium">2.1. Abra o modal "Filtro de Assuntos".</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_2.1" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_2.1" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_2.1" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>
                
                 <!-- Tarefa 2.2 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="2.2">
                    <p class="font-medium">2.2. Expanda e colapse a hierarquia dos assuntos ("CIRURGIA GERAL" > "Trauma").</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_2.2" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_2.2" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_2.2" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>

                 <!-- Tarefa 2.3 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="2.3">
                    <p class="font-medium">2.3. Selecione um sub-assunto específico (Ex: "Apendicite Aguda") e verifique se o contador no botão "Aplicar filtros" é atualizado corretamente.</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_2.3" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_2.3" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_2.3" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>

                 <!-- Tarefa 2.4 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="2.4">
                    <p class="font-medium">2.4. No modal de filtros, marque a opção **"Ver estatísticas"** (usando o *toggle*). As estatísticas detalhadas apareceram corretamente por assunto?</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_2.4" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_2.4" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_2.4" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>

                 <!-- Tarefa 2.5 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="2.5">
                    <p class="font-medium">2.5. Aplique o filtro por dificuldade "Errei" (`1`) e clique em "Aplicar filtros". O contador foi atualizado para mostrar apenas cards com esse *rating*?</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_2.5" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_2.5" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_2.5" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>

                 <!-- Tarefa 2.6 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="2.6">
                    <p class="font-medium">2.6. Clique em "Iniciar Treino Livre". O visualizador de flashcards foi carregado com os cards corretos?</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_2.6" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_2.6" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_2.6" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>
            </section>
            
            <section class="space-y-6">
                <h2 class="text-xl font-semibold section-header pl-3 py-1">Seção 3: Teste do Visualizador de Flashcards</h2>
                <p class="text-sm text-text-muted italic">Instrução: Permaneça no visualizador de flashcards.</p>

                 <!-- Tarefa 3.1 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="3.1">
                    <p class="font-medium">3.1. O botão "Revelar resposta" funciona?</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_3.1" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_3.1" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_3.1" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>

                 <!-- Tarefa 3.2 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="3.2">
                    <p class="font-medium">3.2. Após revelar, o painel de avaliação (1-4) aparece corretamente?</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_3.2" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_3.2" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_3.2" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>

                 <!-- Tarefa 3.3 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="3.3">
                    <p class="font-medium">3.3. Use os atalhos de teclado `Espaço` e `Enter` para revelar a resposta em um novo card.</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_3.3" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_3.3" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_3.3" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>

                 <!-- Tarefa 3.4 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="3.4">
                    <p class="font-medium">3.4. Use os atalhos de teclado numéricos (`1`, `2`, `3`, `4`) para classificar um card e avançar.</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_3.4" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_3.4" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_3.4" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>

                 <!-- Tarefa 3.5 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="3.5">
                    <p class="font-medium">3.5. Abra o "Mapa de flashcards". O painel aparece e a lista reflete corretamente os cards da sessão?</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_3.5" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_3.5" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_3.5" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>

                 <!-- Tarefa 3.6 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="3.6">
                    <p class="font-medium">3.6. Classifique 3 cards e volte para o Dashboard. As métricas do Treino Livre foram atualizadas?</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_3.6" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_3.6" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_3.6" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>
            </section>
            
            <section class="space-y-6">
                <h2 class="text-xl font-semibold section-header pl-3 py-1">Seção 4: Teste do Modo Revisão Espaçada (Zero-State e Funcionalidade)</h2>
                <p class="text-sm text-text-muted italic">Instrução: Mude para o modo **Revisão Espaçada**.</p>

                 <!-- Tarefa 4.1 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="4.1">
                    <p class="font-medium">4.1. Verifique se as métricas "Tempo estudado" e "Sequência" estão em `00:00:00` e `0d` (a menos que já tenha estudado no RE hoje).</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_4.1" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_4.1" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_4.1" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>

                 <!-- Tarefa 4.2 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="4.2">
                    <p class="font-medium">4.2. Clique em "Revisar agora" (o contador do botão deve ser zero ou o número total de cards para hoje).</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_4.2" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_4.2" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_4.2" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>

                 <!-- Tarefa 4.3 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="4.3">
                    <p class="font-medium">4.3. Classifique 5 cards neste modo (dê ratings diferentes: 1, 4, 2, 3, 4).</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_4.3" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_4.3" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_4.3" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>

                 <!-- Tarefa 4.4 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="4.4">
                    <p class="font-medium">4.4. Volte ao Dashboard e confirme: **Apenas as métricas de Revisão Espaçada foram atualizadas** (Progresso Hoje, Tempo Estudado, Sequência, Gráficos inferiores).</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_4.4" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_4.4" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_4.4" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>

                 <!-- Tarefa 4.5 -->
                 <div class="bg-card-bg p-4 rounded-lg border border-border-color task-item" data-task-id="4.5">
                    <p class="font-medium">4.5. Volte para o modo **Treino Livre**. As métricas de Treino Livre permaneceram inalteradas pelas atividades do RE (passo 4.3)?</p>
                    <div class="mt-3 flex flex-col sm:flex-row sm:items-center gap-4">
                        <div class="flex items-center status-radio flex-shrink-0">
                            <input type="radio" name="status_4.5" value="OK" required onchange="toggleSuggestion(this)"> OK
                            <input type="radio" name="status_4.5" value="Erro" onchange="toggleSuggestion(this)" class="ml-4"> Erro
                        </div>
                        <textarea name="sugestao_4.5" placeholder="Problemas Encontrados / Sugestões (Obrigatório se 'Erro')" rows="1" class="hidden-on-ok w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>
            </section>

            <section class="space-y-6">
                <h2 class="text-xl font-semibold section-header pl-3 py-1">Seção 5: Feedback Geral</h2>

                <!-- Pergunta 5.1 -->
                <div class="bg-card-bg p-4 rounded-lg border border-border-color">
                    <label for="nota_geral" class="font-medium block mb-2">5.1. Qual sua nota geral para a usabilidade e estética da plataforma? (1-5, sendo 5 ótimo)</label>
                    <input type="number" id="nota_geral" name="nota_geral" min="1" max="5" required class="w-full sm:w-20 bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary">
                </div>

                <!-- Pergunta 5.2 -->
                <div class="bg-card-bg p-4 rounded-lg border border-border-color">
                    <label for="clareza_separacao" class="font-medium block mb-2">5.2. A separação entre Treino Livre e Revisão Espaçada foi clara?</label>
                    <textarea id="clareza_separacao" name="clareza_separacao" rows="3" placeholder="Comentários sobre a separação dos modos..." class="w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                </div>
                
                 <!-- Pergunta 5.3 -->
                <div class="bg-card-bg p-4 rounded-lg border border-border-color">
                    <label for="atalhos_uteis" class="font-medium block mb-2">5.3. Os atalhos de teclado foram úteis?</label>
                    <textarea id="atalhos_uteis" name="atalhos_uteis" rows="3" placeholder="Comentários sobre a utilidade dos atalhos e sugestões de novos..." class="w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                </div>
                
                 <!-- Pergunta 5.4 -->
                <div class="bg-card-bg p-4 rounded-lg border border-border-color">
                    <label for="o_que_mais_gostou" class="font-medium block mb-2">5.4. O que mais gostou?</label>
                    <textarea id="o_que_mais_gostou" name="o_que_mais_gostou" rows="3" required class="w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                </div>

                <!-- Pergunta 5.5 -->
                <div class="bg-card-bg p-4 rounded-lg border border-border-color">
                    <label for="correcao_urgente" class="font-medium block mb-2">5.5. O que deve ser corrigido com urgência?</label>
                    <textarea id="correcao_urgente" name="correcao_urgente" rows="3" required class="w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm focus:ring-primary focus:border-primary"></textarea>
                </div>
            </section>
            
            <button type="submit" class="w-full bg-primary hover:bg-opacity-90 text-black font-bold py-3 rounded-lg transition">
                Enviar Respostas
            </button>
        </form>

        <div id="resultadoModal" class="fixed inset-0 bg-black bg-opacity-70 hidden items-center justify-center p-4">
            <div class="bg-card-bg p-8 rounded-lg max-w-xl w-full border border-border-color">
                <h3 class="text-2xl font-bold text-success mb-4">✨ Respostas Coletadas! ✨</h3>
                <p class="text-text-light mb-4">Obrigado por testar! Aqui estão os dados brutos para você copiar e enviar:</p>
                <textarea id="resultadoDados" rows="15" readonly class="w-full bg-dark-bg border border-border-color rounded-md p-2 text-sm"></textarea>
                <button onclick="copyToClipboard()" class="mt-4 bg-primary hover:bg-opacity-90 text-black font-bold py-2 px-4 rounded-lg">Copiar Dados</button>
                <button onclick="closeModal()" class="mt-4 ml-4 bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg">Fechar</button>
            </div>
        </div>

    </div>

    <script>
        // Função para mostrar/esconder o campo de sugestão
        function toggleSuggestion(radio) {
            const taskId = radio.name.split('_')[1];
            const suggestionTextarea = document.querySelector(`textarea[name="sugestao_${taskId}"]`);
            
            if (radio.value === 'Erro') {
                suggestionTextarea.classList.remove('hidden-on-ok');
                suggestionTextarea.required = true;
            } else {
                suggestionTextarea.classList.add('hidden-on-ok');
                suggestionTextarea.required = false;
                suggestionTextarea.value = ''; // Limpa o conteúdo se for OK
            }
        }

        // Função para coletar e exibir os dados
        function collectData(event) {
            event.preventDefault();
            const form = document.getElementById('testeForm');
            const data = {};
            const taskItems = form.querySelectorAll('.task-item');

            // Coleta dados das tarefas de OK/Erro
            taskItems.forEach(item => {
                const taskId = item.getAttribute('data-task-id');
                const status = form.querySelector(`input[name="status_${taskId}"]:checked`)?.value || 'Não respondido';
                const sugestao = form.querySelector(`textarea[name="sugestao_${taskId}"]`).value.trim();

                data[`Tarefa ${taskId}`] = {
                    Status: status,
                    Sugestão: sugestao || (status === 'OK' ? 'Nenhuma' : '---')
                };
            });
            
            // Coleta dados do feedback geral
            data["Feedback Geral"] = {
                "Nota Geral (1-5)": form.elements.nota_geral.value,
                "Clareza Separação": form.elements.clareza_separacao.value.trim(),
                "Atalhos Úteis": form.elements.atalhos_uteis.value.trim(),
                "O que mais gostou": form.elements.o_que_mais_gostou.value.trim(),
                "Correção Urgente": form.elements.correcao_urgente.value.trim()
            };

            const resultTextarea = document.getElementById('resultadoDados');
            resultTextarea.value = JSON.stringify(data, null, 2);
            document.getElementById('resultadoModal').classList.add('flex');
            document.getElementById('resultadoModal').classList.remove('hidden');
        }

        // Função para copiar dados
        function copyToClipboard() {
            const textarea = document.getElementById('resultadoDados');
            textarea.select();
            document.execCommand('copy');
            alert('Dados copiados para a área de transferência!');
        }
        
        // Função para fechar o modal
        function closeModal() {
            document.getElementById('resultadoModal').classList.add('hidden');
            document.getElementById('resultadoModal').classList.remove('flex');
        }
    </script>
</body>
</html>
